<?xml version="1.0" encoding="UTF-8"?>
<FSM>

<STATE id = "START_authorisersvc">
	<MESSAGE id = "accept_connection__from_requestor" action = "org.tw.scribble.example.accept_connection" nextState = "__accept_connection__from_requestor_DONE"/>
</STATE>
<STATE id = "__accept_connection__from_requestor_DONE">
	<MESSAGE id = "request_connection__to_filtersvc" action = "org.tw.scribble.example.request_connection" nextState = "__request_connection__to_filtersvc_DONE"/>
</STATE>
<STATE id = "__request_connection__to_filtersvc_DONE">
	<MESSAGE id = "receiveMessage(getSuppliers(uuid))__from_requestor" action = "org.tw.scribble.example.receiveMessage" nextState = "__receiveMessage(getSuppliers(uuid))__from_requestor_DONE"/>
	<MESSAGE id = "receiveMessage(getContracts(uuid))__from_requestor" action = "org.tw.scribble.example.receiveMessage" nextState = "__receiveMessage(getContracts(uuid))__from_requestor_DONE"/>
</STATE>
<STATE id = "__receiveMessage(getSuppliers(uuid))__from_requestor_DONE">
	<MESSAGE id = "sendMessage(deny())__to_requestor" action = "org.tw.scribble.example.sendMessage" nextState = "__sendMessage(deny())__to_requestor_DONE"/>
	<MESSAGE id = "request_connection__to_suppliersvc" action = "org.tw.scribble.example.request_connection" nextState = "__request_connection__to_suppliersvc_DONE"/>
</STATE>
<STATE id = "__sendMessage(deny())__to_requestor_DONE">
	<MESSAGE id = "sendMessage(exit())__to_filtersvc" action = "org.tw.scribble.example.sendMessage" nextState = "__request_connection__to_filtersvc_DONE"/>
</STATE>
<STATE id = "__request_connection__to_suppliersvc_DONE">
	<MESSAGE id = "sendMessage(getsuppliers(uuid))__to_suppliersvc" action = "org.tw.scribble.example.sendMessage" nextState = "__sendMessage(getsuppliers(uuid))__to_suppliersvc_DONE"/>
</STATE>
<STATE id = "__sendMessage(getsuppliers(uuid))__to_suppliersvc_DONE">
	<MESSAGE id = "receiveMessage(getsuppliersRtn(supplierdetails))__from_suppliersvc" action = "org.tw.scribble.example.receiveMessage" nextState = "__receiveMessage(getsuppliersRtn(supplierdetails))__from_suppliersvc_DONE"/>
</STATE>
<STATE id = "__receiveMessage(getsuppliersRtn(supplierdetails))__from_suppliersvc_DONE">
	<MESSAGE id = "sendMessage(filterSupplier(usercontext, filters, supplierdetails))__to_filtersvc" action = "org.tw.scribble.example.sendMessage" nextState = "__sendMessage(filterSupplier(usercontext, filters, supplierdetails))__to_filtersvc_DONE"/>
</STATE>
<STATE id = "__sendMessage(filterSupplier(usercontext, filters, supplierdetails))__to_filtersvc_DONE">
	<MESSAGE id = "receiveMessage(filtered())__from_filtersvc" action = "org.tw.scribble.example.receiveMessage" nextState = "__receiveMessage(filtered())__from_filtersvc_DONE"/>
</STATE>
<STATE id = "__receiveMessage(filtered())__from_filtersvc_DONE">
	<MESSAGE id = "request_disconnection__from_suppliersvc" action = "org.tw.scribble.example.request_disconnection" nextState = "__request_disconnection__from_suppliersvc_DONE"/>
</STATE>
<STATE id = "__request_disconnection__from_suppliersvc_DONE">
	<MESSAGE id = "sendMessage(getSuppliersRtn())__to_requestor" action = "org.tw.scribble.example.sendMessage" nextState = "__request_connection__to_filtersvc_DONE"/>
</STATE>
<STATE id = "__receiveMessage(getContracts(uuid))__from_requestor_DONE">
	<MESSAGE id = "sendMessage(deny())__to_requestor" action = "org.tw.scribble.example.sendMessage" nextState = "__sendMessage(deny())__to_requestor_DONE"/>
	<MESSAGE id = "request_connection__to_contractsvc" action = "org.tw.scribble.example.request_connection" nextState = "__request_connection__to_contractsvc_DONE"/>
</STATE>
<STATE id = "__sendMessage(deny())__to_requestor_DONE">
	<MESSAGE id = "sendMessage(exit())__to_filtersvc" action = "org.tw.scribble.example.sendMessage" nextState = "__request_connection__to_filtersvc_DONE"/>
</STATE>
<STATE id = "__request_connection__to_contractsvc_DONE">
	<MESSAGE id = "sendMessage(getContracts(uuid))__to_contractsvc" action = "org.tw.scribble.example.sendMessage" nextState = "__sendMessage(getContracts(uuid))__to_contractsvc_DONE"/>
</STATE>
<STATE id = "__sendMessage(getContracts(uuid))__to_contractsvc_DONE">
	<MESSAGE id = "receiveMessage(getContractsRtn(contractdetails))__from_contractsvc" action = "org.tw.scribble.example.receiveMessage" nextState = "__receiveMessage(getContractsRtn(contractdetails))__from_contractsvc_DONE"/>
</STATE>
<STATE id = "__receiveMessage(getContractsRtn(contractdetails))__from_contractsvc_DONE">
	<MESSAGE id = "sendMessage(filterContract(usercontext, filters, contractdetails))__to_filtersvc" action = "org.tw.scribble.example.sendMessage" nextState = "__sendMessage(filterContract(usercontext, filters, contractdetails))__to_filtersvc_DONE"/>
</STATE>
<STATE id = "__sendMessage(filterContract(usercontext, filters, contractdetails))__to_filtersvc_DONE">
	<MESSAGE id = "receiveMessage(filtered())__from_filtersvc" action = "org.tw.scribble.example.receiveMessage" nextState = "__receiveMessage(filtered())__from_filtersvc_DONE"/>
</STATE>
<STATE id = "__receiveMessage(filtered())__from_filtersvc_DONE">
	<MESSAGE id = "request_disconnection__from_contractsvc" action = "org.tw.scribble.example.request_disconnection" nextState = "__request_disconnection__from_contractsvc_DONE"/>
</STATE>
<STATE id = "__request_disconnection__from_contractsvc_DONE">
	<MESSAGE id = "sendMessage(contracts())__to_requestor" action = "org.tw.scribble.example.sendMessage" nextState = "__request_connection__to_filtersvc_DONE"/>
</STATE>

</FSM>
